# URL: DB_URL (JDBC) or DATABASE_URL (Railway; app adds jdbc: prefix). User/pass: DB_* or PGUSER/PGPASSWORD (Railway).
spring.datasource.url=${DB_URL:}
spring.datasource.username=${DB_USERNAME:${PGUSER:${POSTGRES_USER:postgres}}}
spring.datasource.password=${DB_PASSWORD:${PGPASSWORD:${POSTGRES_PASSWORD:}}}
spring.datasource.driver-class-name=org.postgresql.Driver

# Use update once on a fresh DB to create tables, then remove DDL_AUTO or set to validate
spring.jpa.hibernate.ddl-auto=${DDL_AUTO:validate}
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.open-in-view=false

# Railway (and other hosts) inject PORT at runtime
server.port=${PORT:8080}
server.address=0.0.0.0

# In production this should come from an environment variable or external vault
app.jwt.secret=${APP_JWT_SECRET}
app.jwt.expiration-ms=86400000

# Mail: use defaults so app can start without mail configured (optional in prod)
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=${APP_MAIL_USER:}
spring.mail.password=${APP_MAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

app.mail.from=${APP_MAIL_FROM:noreply@localhost}
app.mail.order-notify-to=${APP_MAIL_ORDER_NOTIFY_TO:}

